<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>

$(document).ready(function() {
  /////////////////////////////////////////////////////////////////////////////////////////////
  // Handle Accordion Dropdowns
  /////////////////////////////////////////////////////////////////////////////////////////////
  // Allow dropdown pages to control the next page
  $(".dropdown").each(function() {
    if (window.location.href.indexOf("gracepointboston.org") > -1) {
      let code = $(this).parent().parent();
      let dropdownDiv = code.parent().parent().parent().parent().parent();
      if (!$(this).hasClass("dropdown-arrow--initiallyopen")) {
        $(dropdownDiv).next().hide();
      }
    }
  });
  $(".dropdown").click(function() {
    let code = $(this).parent().parent();
    let nextDiv = code.parent().parent().parent().parent().parent().next();
    if ($(nextDiv).css("display") == "none") {
      $(this).find(".dropdown--arrow__down").slideUp(400);
      $(this).find(".dropdown--arrow__up").slideDown(400);
      nextDiv.slideDown();
    } else {
      $(this).find(".dropdown--arrow__up").slideUp(400);
      $(this).find(".dropdown--arrow__down").slideDown(400);
      nextDiv.slideUp();
    }
  });

  /////////////////////////////////////////////////////////////////////////////////////////////
  // Handle Comm100 Button
  /////////////////////////////////////////////////////////////////////////////////////////////
  function openChat() {
    iframe = $("#comm100-button-1a39c0b0-eeca-4162-9b46-c021177a67db").find("iframe")[0].contentWindow.document
    $(iframe).find("body").find(".svg-container").click()
  }

  let miniCommButton = "<span href=\"\" class=\"sqs-svg-icon--wrapper comm100-chat-button\"><div><svg x=\"0px\" y=\"0px\" width=\"32px\" height=\"32px\" viewBox=\"-8 -8 48 48\" enableBackground=\"new 0 0 32 32\" focusable=\"false\" class=\"outIcon\"><g><defs><linearGradient id=\"linear\"><stop offset=\"0%\" stop-color=\"#bbb\"></stop><stop offset=\"100%\" stop-color=\"rgb(174,157,157)\"></stop></linearGradient></defs><path fill=\"#fff\" class=\"chatButton__svg-chat-path\" d=\"M16.007 0c-8.299 0-14.023 6.836-14.023 14.024 0 5.88 2.982 8.636 4.107 9.916 0 0 4.093 4.585 12.068 8.060v-4.121c4.783-0.563 11.858-5.289 11.858-13.855-0.001-8.271-6.794-14.024-14.010-14.024z\"></path><path fill=\"url(#linear)\" class=\"innerIcon\" d=\"M18.035 22.372v3.657c-0.014 0-2.729-1.364-4.276-2.574-2.926-2.236-6.498-4.416-6.498-9.438 0-4.993 4.149-8.622 8.622-8.622 0.005 0 0.011-0 0.017-0 4.744 0 8.591 3.838 8.605 8.579v0.043c0 5.162-4.164 7.779-6.47 8.355z\"></path></g></svg></div></span>";

  $(".sqs-svg-icon--list").append(miniCommButton);
  $(".comm100-chat-button").click(function() {
    openChat();
  });
  $("#welcome a").click(function() {
    openChat();
    return false;
  });
});
</script>

<!-- Make it possible to see FontAwesome icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
